import{b as $,r as d,j as e,L as z}from"./index-CH6VHjRI.js";import{I as V,T as _,S as I}from"./Inputs-lG10xZVY.js";function T(){const{skills:a,projects:f,isLoading:g,addSkill:p,updateSkill:c,deleteSkill:m}=$(),y=a||[],j=f||[],[l,x]=d.useState(null),[i,h]=d.useState(!1),[u,S]=d.useState(""),[b,F]=d.useState("All"),[o,n]=d.useState({name:"",category:"Core",isVisible:!0,icon:""}),k=["All","Core","Frontend","Backend","Tools","Design","DevOps","Other"],C=k.filter(t=>t!=="All"),v=d.useMemo(()=>{let t=y;if(b!=="All"&&(t=t.filter(s=>s.category===b)),u){const s=u.toLowerCase();t=t.filter(r=>r.name.toLowerCase().includes(s)||r.category.toLowerCase().includes(s))}return t.sort((s,r)=>s.name.localeCompare(r.name))},[y,b,u]),w=t=>t?j.filter(s=>s&&s.skills&&Array.isArray(s.skills)&&s.skills.some(r=>String(r).toLowerCase()===String(t).toLowerCase())).length:0;if(g)return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"size-10 border-4 border-[#1A73E8] border-t-transparent rounded-full animate-spin"})});const A=t=>{h(!1),x(t),n({...t})},N=()=>{x(null),h(!0),n({name:"",category:"Core",isVisible:!0,icon:""})},L=async t=>{t.preventDefault();try{i?(await p(o),h(!1),n({name:"",category:"Core",isVisible:!0,icon:""})):l&&(await c(l.id,o),x({...l,...o}))}catch(s){console.error("Failed to save skill",s),alert("Failed to save changes. Please try again.")}},D=async()=>{if(!l)return;const t=w(l.name),s=t>0?`⚠️ Warning: This skill is used in ${t} projects.

Deleting it will remove it from your Library, but it may still appear as text tags in projects.

Are you sure you want to delete "${l.name}"?`:`Delete "${l.name}"?`;window.confirm(s)&&(await m(l.id),x(null),h(!1))};return e.jsxs("div",{className:"flex h-[calc(100vh-4rem)] md:h-[calc(100vh-8rem)] gap-0 bg-white md:border border-[#DADCE0] md:rounded-lg shadow-sm overflow-hidden relative",children:[e.jsxs("div",{className:`w-full md:w-[350px] flex flex-col border-r border-[#DADCE0] bg-gray-50 ${l||i?"hidden md:flex":"flex"}`,children:[e.jsxs("div",{className:"p-4 border-b border-[#DADCE0] space-y-3 bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-sm font-bold text-[#5F6368] uppercase tracking-wider",children:"Skills Library"}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:y.length})]}),e.jsx("div",{className:"relative",children:e.jsx(V,{placeholder:"Search skills...",icon:"search",value:u,onChange:t=>S(t.target.value)})}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 no-scrollbar mask-fade",children:k.map(t=>e.jsx("button",{onClick:()=>F(t),className:`whitespace-nowrap px-3 py-1 rounded-full text-xs font-medium transition-colors ${b===t?"bg-[#1A73E8] text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:t},t))})]}),e.jsxs("button",{onClick:N,className:"hidden md:flex mx-4 mt-3 mb-2 items-center justify-center gap-2 py-2 border border-dashed border-[#DADCE0] rounded-lg text-[#1A73E8] text-sm font-medium hover:bg-[#F8F9FA] transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"add_circle"}),"Create New Skill"]}),e.jsx("div",{className:"flex-1 overflow-y-auto w-full pb-24",children:v.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500 text-sm",children:"No skills found."}):e.jsx("div",{className:"divide-y divide-[#DADCE0]/50",children:b==="All"&&!u?C.map(t=>{const s=v.filter(r=>r.category===t);return s.length===0?null:e.jsxs("div",{children:[e.jsxs("div",{className:"px-4 py-2 bg-gray-50/80 backdrop-blur-sm sticky top-0 z-10 border-b border-[#DADCE0]/50 text-xs font-bold text-[#5F6368] uppercase tracking-wider flex justify-between items-center",children:[t,e.jsx("span",{className:"text-[10px] bg-gray-200 text-gray-600 px-1.5 rounded-full",children:s.length})]}),s.map(r=>e.jsx(E,{skill:r,selectedSkill:l,handleSelect:A,getSkillUsage:w},r.id))]},t)}):v.map(t=>e.jsx(E,{skill:t,selectedSkill:l,handleSelect:A,getSkillUsage:w},t.id))})}),e.jsx("button",{onClick:N,className:"md:hidden absolute bottom-6 right-6 z-20 size-14 bg-[#1A73E8] text-white rounded-2xl shadow-lg flex items-center justify-center hover:bg-[#1557B0] active:scale-90 transition-all",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"add"})})]}),e.jsx("div",{className:`flex-1 flex flex-col bg-white overflow-y-auto ${!l&&!i?"hidden md:flex":"flex fixed top-16 left-0 right-0 bottom-0 z-30 md:static md:z-auto"}`,children:l||i?e.jsxs("form",{onSubmit:L,className:"flex flex-col h-full bg-white",children:[e.jsxs("div",{className:"h-16 border-b border-[#DADCE0] flex items-center justify-between px-4 md:px-8 bg-white shrink-0 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{x(null),h(!1)},className:"md:hidden mr-1 p-2 rounded-full hover:bg-gray-100 -ml-3 text-gray-600",children:e.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-normal text-[#202124]",children:i?"Create New Skill":"Edit Skill"}),e.jsx("p",{className:"text-xs text-gray-500",children:i?"Add a new technology to your stack.":`ID: ${l?.id}`})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[!i&&e.jsx("button",{type:"button",onClick:D,className:"hidden md:block text-[#D93025] hover:bg-[#FCE8E6] p-2 rounded-full transition-colors",title:"Delete Skill",children:e.jsx("span",{className:"material-symbols-outlined",children:"delete"})}),e.jsx("button",{type:"submit",className:"bg-[#1A73E8] text-white px-6 py-2 rounded shadow-sm text-sm font-medium hover:shadow hover:bg-[#1557B0] transition-all",children:"Save Changes"})]})]}),e.jsxs("div",{className:"flex-1 p-4 md:p-8 max-w-3xl mx-auto w-full space-y-6 md:space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-[#3C4043]",children:"Skill Name"}),e.jsx(_,{value:o.name,onChange:t=>n({...o,name:t.target.value}),placeholder:"e.g. React.js",required:!0,autoFocus:!0})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(I,{label:"Category",value:o.category,onChange:t=>n({...o,category:t.target.value}),options:C.map(t=>({value:t,label:t}))}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Groups skills in your resume/portfolio."})]})}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-[#F8F9FA] rounded-lg border border-[#DADCE0]",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o.isVisible,onChange:t=>n({...o,isVisible:t.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#1A73E8]"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"toggle",className:"block text-sm font-medium text-[#202124] cursor-pointer",children:"Visible Publicly"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enable to show this skill in your main portfolio list."})]})]}),!i&&l&&e.jsxs("div",{className:"pt-6 border-t border-[#DADCE0]",children:[e.jsxs("h4",{className:"text-sm font-bold text-[#5F6368] mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-lg",children:"link"}),"Associated Projects"]}),e.jsx("div",{className:"bg-[#F8F9FA] rounded-xl p-4 border border-[#DADCE0]/50",children:j.filter(t=>(Array.isArray(t.skills)?t.skills:[]).some(s=>s.toLowerCase()===l.name.toLowerCase())).length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:j.filter(t=>(Array.isArray(t.skills)?t.skills:[]).some(s=>s.toLowerCase()===l.name.toLowerCase())).map(t=>e.jsxs(z,{to:"/admin/projects",className:"group flex items-center gap-2 px-3 py-1.5 bg-white border border-[#DADCE0] rounded-full text-xs font-medium text-[#3C4043] hover:border-[#1A73E8] hover:text-[#1A73E8] transition-all shadow-sm",children:[t.title,e.jsx("span",{className:"material-symbols-outlined text-[10px] opacity-0 group-hover:opacity-100 transition-opacity",children:"arrow_forward"})]},t.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-gray-500",children:[e.jsx("span",{className:"material-symbols-outlined text-3xl mb-2 text-gray-300",children:"link_off"}),e.jsx("p",{className:"text-xs",children:"No projects are currently linked to this skill."})]})})]}),!i&&e.jsx("div",{className:"mt-8 border-t border-[#DADCE0] pt-6 md:hidden",children:e.jsxs("button",{type:"button",onClick:D,className:"flex items-center justify-center gap-2 w-full py-3 text-[#D93025] border border-[#D93025] rounded-lg font-medium hover:bg-[#FCE8E6] transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined",children:"delete"}),"Delete Skill"]})})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8 bg-[#F8F9FA]/50",children:[e.jsx("div",{className:"size-24 bg-white rounded-full flex items-center justify-center shadow-sm mb-6 border border-[#DADCE0]",children:e.jsx("span",{className:"material-symbols-outlined text-5xl text-[#1A73E8]",children:"auto_fix"})}),e.jsx("h3",{className:"text-xl font-medium text-[#202124] mb-2",children:"Select a Skill to Edit"}),e.jsx("p",{className:"text-gray-500 max-w-xs mb-8",children:"Choose a skill from the library on the left or create a new one to grow your portfolio."}),e.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-6 py-3 bg-[#1A73E8] text-white rounded-full font-medium hover:bg-[#1557B0] hover:shadow-lg transition-all",children:[e.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Create New Skill"]})]})}),e.jsx("style",{children:`
                .no-scrollbar::-webkit-scrollbar { display: none; }
                .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
                .mask-fade { -webkit-mask-image: linear-gradient(to right, black 85%, transparent 100%); }
                .toggle-checkbox:checked { right: 0; border-color: #1A73E8; }
                .toggle-checkbox:checked + .toggle-label { background-color: #E8F0FE; }
            `})]})}function E({skill:a,selectedSkill:f,handleSelect:g,getSkillUsage:p}){const c=p(a.name),m=f?.id===a.id;return e.jsxs("div",{onClick:()=>g(a),className:`mx-4 mb-3 p-4 rounded-xl border transition-all cursor-pointer flex items-center justify-between group relative overflow-hidden ${m?"bg-[#E8F0FE] border-[#1A73E8] shadow-sm":"bg-white border-[#DADCE0] hover:border-[#1A73E8] hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`size-10 rounded-lg flex items-center justify-center text-xl shrink-0 ${m?"bg-white text-[#1967D2]":"bg-gray-50 text-gray-500 border border-gray-100"}`,children:e.jsx("span",{className:"material-symbols-outlined",children:a.icon||"code"})}),e.jsx("div",{children:e.jsx("h4",{className:`font-medium text-base mb-0.5 ${m?"text-[#1967D2]":"text-[#202124]"}`,children:a.name})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c>0&&e.jsx("span",{className:"text-[10px] bg-white border border-gray-200 px-2 py-1 rounded-md text-gray-600 font-bold",title:`${c} Projects`,children:c}),e.jsx("div",{className:`size-2 rounded-full ${a.isVisible?"bg-green-500 shadow-[0_0_6px_rgba(34,197,94,0.4)]":"bg-gray-300"}`,title:a.isVisible?"Visible":"Hidden"})]})]})}export{T as default};
