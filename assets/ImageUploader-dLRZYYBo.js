import{d as p,r as b,j as e,t as c,G as U}from"./index-CH6VHjRI.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],f=p("loader-circle",k);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],M=p("upload",I);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_=p("x",L),E=({value:h,onChange:x,label:j="Upload Image",folder:y})=>{const[l,g]=b.useState(!1),[u,i]=b.useState(h),w=async n=>new Promise((s,d)=>{const t=new Image;t.src=URL.createObjectURL(n),t.onload=()=>{const r=document.createElement("canvas");let a=t.width,o=t.height;const m=1920;a>m&&(o=Math.round(o*m/a),a=m),r.width=a,r.height=o,r.getContext("2d")?.drawImage(t,0,0,a,o);const v=r.toDataURL("image/webp",.8).split(",")[1];s({base64:v,mime:"image/webp"})},t.onerror=d}),N=async n=>{const s=n.target.files?.[0];if(!s)return;if(!s.type.startsWith("image/")){c.error("Please upload an image file");return}if(s.size>5*1024*1024){c.error("File is too large (Max 5MB)");return}g(!0);const d=URL.createObjectURL(s);i(d);try{const{base64:t,mime:r}=await w(s),a=await U.request({action:"UPLOAD_FILE",data:{name:s.name.split(".")[0]+".webp",mimeType:r,base64:t,folder:y}});if(a.success&&a.data?.url)x(a.data.url),c.success("Image uploaded!");else throw new Error(a.message||"Upload failed")}catch(t){console.error(t),c.error("Upload failed"),i(h)}finally{g(!1)}};return e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:j}),u?e.jsxs("div",{className:"relative group w-full h-40 rounded-lg overflow-hidden border border-gray-200",children:[e.jsx("img",{src:u,alt:"Queue",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:e.jsx("button",{onClick:()=>{i(""),x("")},className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600",title:"Remove",children:e.jsx(_,{className:"size-4"})})}),l&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx(f,{className:"w-8 h-8 text-white animate-spin"})})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:l?e.jsx(f,{className:"w-8 h-8 text-blue-500 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:e.jsx("span",{className:"font-semibold",children:"Click to upload"})}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"JPG, PNG, WebP (Max 5MB)"})]})}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:N,disabled:l})]})]})};export{E as I};
